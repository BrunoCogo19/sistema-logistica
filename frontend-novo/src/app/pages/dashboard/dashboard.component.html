<div class="dashboard-container">
  <h1>Painel do Gestor</h1>
  <p>Resumo de hoje ({{ (now | date:'fullDate') }})</p>

  <div *ngIf="isLoading" class="loading-overlay">
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    <h3>Carregando dados...</h3>
  </div>

  <div *ngIf="!isLoading && resumoStatus && resumoFinanceiro">
    
    <h2>Status dos Pedidos (Tempo Real)</h2>
    <div class="card-grid">
      
      <mat-card class="kpi-card status-aberto">
        <mat-card-header>
          <mat-card-title>{{ resumoStatus.emAberto }}</mat-card-title>
          <mat-card-subtitle>Pedidos em Aberto</mat-card-subtitle>
        </mat-card-header>
        <mat-icon>inventory_2</mat-icon>
      </mat-card>

      <mat-card class="kpi-card status-rua">
        <mat-card-header>
          <mat-card-title>{{ resumoStatus.naRua }}</mat-card-title>
          <mat-card-subtitle>Pedidos na Rua</mat-card-subtitle>
        </mat-card-header>
        <mat-icon>local_shipping</mat-icon>
      </mat-card>

      <mat-card class="kpi-card status-entregue">
        <mat-card-header>
          <mat-card-title>{{ resumoStatus.entreguesHoje }}</mat-card-title>
          <mat-card-subtitle>Entregues Hoje</mat-card-subtitle>
        </mat-card-header>
        <mat-icon>task_alt</mat-icon>
      </mat-card>

      <mat-card class="kpi-card status-cancelado">
        <mat-card-header>
          <mat-card-title>{{ resumoStatus.canceladosHoje }}</mat-card-title>
          <mat-card-subtitle>Cancelados Hoje</mat-card-subtitle>
        </mat-card-header>
        <mat-icon>cancel</mat-icon>
      </mat-card>
    </div>

    <h2>Resumo Financeiro (Hoje)</h2>
    <div class="card-grid-financeiro">
      
      <mat-card class="kpi-card-grande total-faturado">
        <mat-card-title>Total Faturado (Hoje)</mat-card-title>
        <mat-card-content>
          <p class="valor-grande">{{ resumoFinanceiro.totalFaturado | currency:'BRL' }}</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="kpi-card-grande">
        <mat-card-title>Recebido na Entrega (Hoje)</mat-card-title>
        <mat-card-content class="desdobramento-content">
          <div class="linha">
            <span><mat-icon>payments</mat-icon> Dinheiro</span>
            <strong>{{ resumoFinanceiro.faturamentoNaEntrega.dinheiro | currency:'BRL' }}</strong>
          </div>
          <div class="linha">
            <span><mat-icon>pix</mat-icon> PIX</span>
            <strong>{{ resumoFinanceiro.faturamentoNaEntrega.pix | currency:'BRL' }}</strong>
          </div>
          <div class="linha">
            <span><mat-icon>credit_card</mat-icon> Crédito</span>
            <strong>{{ resumoFinanceiro.faturamentoNaEntrega.credito | currency:'BRL' }}</strong>
          </div>
          <div class="linha">
            <span><mat-icon>credit_card</mat-icon> Débito</span>
            <strong>{{ resumoFinanceiro.faturamentoNaEntrega.debito | currency:'BRL' }}</strong>
          </div>
        </mat-card-content>
      </mat-card>

    </div>

  </div>
</div>